{% extends 'base.html' %}
{% load static %}

{% block title %}
Mini Game: {{game.name}}
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'css/detail.css' %}"> 
{% endblock %}

{% block content %}
    <section class="game_section game_section_board">
     <div class="r1">
        {% for field in r1 %}
        <div class= 'game_field --row'><div class='game_field__header'> {{field.name}}</div></div>
        {% endfor %}
     </div>
     <div class="r2 ">
        {% for field in r2 %}
        <div class= 'game_field --col'>
            <div class='game_field__header'>
                {{field.name}}
            </div>
        </div>
        {% endfor %}
     </div>
     <div class="r3">
        {% for field in r3 %}
        <div class= 'game_field --row'><div class='game_field__header'> {{field.name}}</div></div>
        {% endfor %}
     </div>
     
     <div class="r4">
        {% for field in r4 %}
        <div class= 'game_field --col'>
            <div class='game_field__header'>
                {{field.name}}
            </div>
        </div>
        {% endfor %}
     </div>
      <div class="inner_board"></div>

    </section>
    <section class = "game_section game_section_sidebar">
        <div class="game_section_sidebar_top">
            <article class="sidebar_top__sidebar_header">
                <h2>Dottore</h2>
            </article>
            <article class="sidebar_top__player_info __sidebar_item">
                <div class= '__sidebar_item_action'><h4>Player Info:</h4></div>
                    {% if  game.is_played %}
                    <h4>Spectator Mode</h4>
                    {% endif %}
            </article>
            <article class="sidebar_top__game_stats __sidebar_item">
                <div class= '__sidebar_item_action'><h4>Player capital:</h4></div>
            </article>
            <article class="sidebar_top__game_actions __sidebar_item">
            <div class= '__sidebar_item_action'><h4>Player Actions:</h4></div>
            <div class="__sidebar_menu_column">
                {% if player_in_game %}
                <div class= '__sidebar_item_action'><a href ="{% url 'game_end_turn' game.id%}">Roll Dice</a></div>
                <div class= '__sidebar_item_action'><a href ="{% url 'game_end_turn' game.id%}">Buy Property</a></div>
                <div class= '__sidebar_item_action'><a href ="{% url 'game_end_turn' game.id%}">Sell Property</a></div>
                <div class= '__sidebar_item_action'><a href ="{% url 'game_end_turn' game.id%}">Use Bonus</a></div>
                <div class= '__sidebar_item_action'><a href ="{% url 'game_end_turn' game.id%}">End Turn</a></div>
                {% endif %}
            </div>
            </article>
            <article class="sidebar_top__global_actions  __sidebar_item">
                <div class= '__sidebar_item_action'><h4>Game options:</h4></div>
                <div class="__sidebar_menu_column">
                    {% if player_in_game %}
                    <div class= '__sidebar_item_action'><a href ="{% url 'game_end' game.id%}">End Game</a></div>
                    <div class= '__sidebar_item_action'><a href ="{% url 'game_leave' game.id%}">Leave Game</a></div>
                    {% endif %}
                    {% if not game.is_played %}
                    <input type ="button" value="Start Game" class="__sidebar_item_action --start_btn">
                    <input type ="button" value="Ready" class="__sidebar_item_action --ready_btn">

                    {% endif %}
                    {% if user.username == game.host %}
                    <div class='__sidebar_item_action'><a href ="{% url 'delete_gam' game.id%}">Delete</a></div>
                        {% endif %}
                    <div class='__sidebar_item_action'><a href ="{% url 'home'%}">Home</a></div>

                                        <!-- <a href ="{% url 'game_start' game.id%}">Start Game</a></div> 
                     <a href ="{% url 'player_ready' game.id%}">Ready</a></div> -->
                </div>
        </article>
        </div>
        <hr>
        <div class="game_section_sidebar_bottom">
            <h4>Hosted by {{game.host}}</h4>
            {% if game.is_played %}
            <h5 class = "notification-item">Game has already started!</h5>
                {% else %}
            <h5 class  = "notification-item">Game hasn't started yet.</h5>
                {% endif %}
            <hr>
                {% if game.is_played %}
            <p>Players in game: (
                {% for player in players_playing %}
                {{player}},
                {% endfor %})
            </p>
            <hr>
            <div class = '--menu'>
                {{game.turn_of_player}} turn!
                    {% else %}
                Players Ready :{{game.how_many_players_ready}} ({% for player in players_ready %}{{player}},
                    {% endfor %})
                Max Players: {{game.max_players}}
                    {% endif %}
            </div>
            <hr>
            <p class="notification-item">NOTIFICATIONS DISPLAYED HERE<p>
        </div>
    </section>
</div>
<script src="{% static 'js/game.js' %}"></script>
{% endblock %}
